class AnalysisData::Tabelog < AnalysisData::Base
  class << self
    def domain
      'tabelog.com'
    end

    def enable_process_result; true; end

    def path; nil; end

    def original
      tmp = '{"multi":{"org_name_pathes":{"/html/body/div[$LOOP$]/div[$LOOP$]/div[$LOOP$]/div[$LOOP$]/div[6]/div[$LOOP$]/div[2]/div/div[1]/div/div[1]/h3/a":40},"contents_pathes":{"/html/body/div[$LOOP$]/div[$LOOP$]/div[$LOOP$]/div[$LOOP$]/div[6]/div[$LOOP$]/div[2]/div/div[3]/ul/li[$LOOP$]/p/a/img":60,"/html/body/div[$LOOP$]/div[$LOOP$]/div[$LOOP$]/div[$LOOP$]/div[6]/div[$LOOP$]/div[2]/div/div[1]/div/div[3]/p[$LOOP$]/a/em":20,"/html/body/div[$LOOP$]/div[$LOOP$]/div[$LOOP$]/div[$LOOP$]/div[6]/div[$LOOP$]/div[2]/div/div[1]/div/div[3]/p[$LOOP$]/a":20,"/html/body/div[$LOOP$]/div[$LOOP$]/div[$LOOP$]/div[$LOOP$]/div[6]/div[$LOOP$]/div[2]/div/div[3]/div/div/a":20,"/html/body/div[$LOOP$]/div[$LOOP$]/div[$LOOP$]/div[$LOOP$]/div[6]/div[$LOOP$]/div[2]/div/div[2]/div/div/span[2]/a":19,"/html/body/div[$LOOP$]/div[$LOOP$]/div[$LOOP$]/div[$LOOP$]/div[6]/div[$LOOP$]/div[2]/div/div[1]/div/div[1]/h3/a":19,"/html/body/div[$LOOP$]/div[$LOOP$]/div[$LOOP$]/div[$LOOP$]/div[6]/div[$LOOP$]/div[2]/div/div[2]/div/a":19,"/html/body/div[$LOOP$]/div[$LOOP$]/div[$LOOP$]/div[$LOOP$]/div[6]/div[$LOOP$]/div[2]/div/div[2]/div/a/strong":19,"/html/body/div[$LOOP$]/div[$LOOP$]/div[$LOOP$]/div[$LOOP$]/div[6]/div[$LOOP$]/div[2]/div/div[3]/ul/li[$LOOP$]/p/a":60},"common_item_words":["","人"],"common_item_pathes":["/html/body/div[$LOOP$]/div[$LOOP$]/div[$LOOP$]/div[$LOOP$]/div[6]/div[$LOOP$]/div[2]/div/div[3]/ul/li[$LOOP$]/p/a","/html/body/div[$LOOP$]/div[$LOOP$]/div[$LOOP$]/div[$LOOP$]/div[6]/div[$LOOP$]/div[2]/div/div[1]/div/div[3]/p[$LOOP$]/a"],"uncommon_item_pathes":{"/html/body/div[$LOOP$]/div[$LOOP$]/div[$LOOP$]/div[$LOOP$]/div[6]/div[$LOOP$]/div[2]/div/div[3]/ul/li[$LOOP$]/p/a/img":60,"/html/body/div[$LOOP$]/div[$LOOP$]/div[$LOOP$]/div[$LOOP$]/div[6]/div[$LOOP$]/div[2]/div/div[1]/div/div[1]/h3/a/text()":37,"/html/body/div[$LOOP$]/div[$LOOP$]/div[$LOOP$]/div[$LOOP$]/div[6]/div[$LOOP$]/div[2]/div/div[2]/div/a/strong/text()":36},"reserved_common_item_words":[],"delimiter":[],"contents_config_mode":false,"corporate_area_pathes":["/html/body/div[$LOOP$]/div[$LOOP$]/div[$LOOP$]/div[$LOOP$]/div[6]/div[$LOOP$]","/html/body/div[$LOOP$]/div[$LOOP$]/div[$LOOP$]/div[$LOOP$]/div[6]/div[$LOOP$]/div[2]/div/div[1]/div/div[3]/p[$LOOP$]","/html/body/div[$LOOP$]/div[$LOOP$]/div[$LOOP$]/div[$LOOP$]/div[6]/div[$LOOP$]/div[$LOOP$]/div[$LOOP$]/div[$LOOP$]/div/ul[$LOOP$]","/html/body/div[$LOOP$]/div[$LOOP$]/div[$LOOP$]/div[$LOOP$]/div[6]/div[$LOOP$]/div[3]/div[2]/div/div/ul/li[$LOOP$]/div/p[$LOOP$]","/html/body/div[24]/div[1]/div[8]/div[6]/div[6]/div[4]/div/a/div[$LOOP$]","/html/body/div[24]/div[1]/div[8]/div[6]/div[6]/div[4]/div/a/div[2]/p[$LOOP$]"],"corporate_area_start_pathes":"/html/body/div[$LOOP$]/div[$LOOP$]/div[$LOOP$]/div[$LOOP$]/div[6]/div[$LOOP$]","end_pathes":{"/html/body/div[$LOOP$]/div[$LOOP$]/div[$LOOP$]/div[$LOOP$]/div[6]/div[$LOOP$]/div[3]/div[2]/div/div/ul/li[14]/div/p[1]/span[2]/text()":19},"separation_data":null,"relative":{"title":[],"text":[]},"absolute":[],"same_column":[],"filter_path_of_content_urls":{}},"single":{"org_name_pathes":{"/html/body/div[14]/div[1]/div[1]/div[1]/section/div[2]/div[1]/div/h2/span":2},"contents_pathes":{},"footer_pathes":{},"common_item_words":[],"common_item_pathes":null,"uncommon_item_pathes":null,"reserved_common_item_words":[],"delimiter":[],"contents_config_mode":true,"relative":{"title":{"/html/body/div[14]/div[1]/div[3]/div[1]/div[10]/div[2]/table[$LOOP$]/tbody/tr[$LOOP$]/th":6},"text":{"/html/body/div[14]/div[1]/div[3]/div[1]/div[10]/div[2]/table[1]/tbody/tr[1]/td/div/span":2,"/html/body/div[14]/div[1]/div[3]/div[1]/div[10]/div[2]/table[4]/tbody/tr[5]/td/p/a":2,"/html/body/div[14]/div[1]/div[3]/div[1]/div[10]/div[2]/table[1]/tbody/tr[5]/td/p/span[1]/a":1,"/html/body/div[14]/div[1]/div[3]/div[1]/div[10]/div[2]/table[1]/tbody/tr[2]/td/span":1}},"absolute":{},"same_column":{}},"multi_available_urls":["https://tabelog.com/tokyo/A1313/"],"js_functions":{},"accessed_count":21,"high_priority_accessed_count":2,"accessed_urls":["https://tabelog.com/tokyo/A1313/","https://tabelog.com/tokyo/A1313/A131301/13176780/","https://tabelog.com/tokyo/A1313/A131301/13177492/dtlrvwlst/","https://tabelog.com/tokyo/A1313/A131301/13177492/dtlrvwlst/B451229678/","https://tabelog.com/tokyo/A1313/A131301/13177492/","https://tabelog.com/tokyo/A1313/A131301/13153417/","https://tabelog.com/tokyo/A1313/A131301/13130007/dtlrvwlst/B463553551/","https://tabelog.com/tokyo/A1313/A131301/13148801/","https://tabelog.com/tokyo/A1313/A131301/13130007/","https://tabelog.com/tokyo/A1313/A131301/13130007/dtlrvwlst/","https://tabelog.com/tokyo/A1313/A131301/13238306/","https://tabelog.com/tokyo/A1313/A131301/13200027/","https://tabelog.com/tokyo/A1313/A131301/13250537/","https://tabelog.com/tokyo/A1313/A131301/13250537/dtlrvwlst/","https://tabelog.com/tokyo/A1313/A131301/13250537/dtlrvwlst/B459850669/","https://tabelog.com/tokyo/A1313/A131301/13275848/","https://tabelog.com/tokyo/A1313/A131301/13275848/dtlrvwlst/B468515929/","https://tabelog.com/tokyo/A1313/A131301/13002300/","https://tabelog.com/tokyo/A1313/A131301/13011221/","https://tabelog.com/tokyo/A1313/A131301/13011221/dtlrvwlst/","https://tabelog.com/tokyo/A1313/A131301/13011221/dtlrvwlst/B467722022/"],"high_priority_accessed_urls":["https://tabelog.com/tokyo/A1313/A131303/13027693/","https://tabelog.com/tokyo/A1313/A131306/13020990/"],"analisys_page_count":21}'
      Json2.parse(tmp, symbolize: false)
    end

    def customize
      tmp = '{"multi":{"org_name_pathes":{"/html/body/div[$LOOP$]/div[$LOOP$]/div[$LOOP$]/div[$LOOP$]/div[6]/div[$LOOP$]/div[2]/div/div[1]/div/div[1]/h3/a":40},
      "contents_pathes":{"/html/body/div[$LOOP$]/div[$LOOP$]/div[$LOOP$]/div[$LOOP$]/div[6]/div[$LOOP$]/div[2]/div/div[3]/ul/li[$LOOP$]/p/a/img":60,"/html/body/div[$LOOP$]/div[$LOOP$]/div[$LOOP$]/div[$LOOP$]/div[6]/div[$LOOP$]/div[2]/div/div[1]/div/div[3]/p[$LOOP$]/a/em":20,"/html/body/div[$LOOP$]/div[$LOOP$]/div[$LOOP$]/div[$LOOP$]/div[6]/div[$LOOP$]/div[2]/div/div[1]/div/div[3]/p[$LOOP$]/a":20,"/html/body/div[$LOOP$]/div[$LOOP$]/div[$LOOP$]/div[$LOOP$]/div[6]/div[$LOOP$]/div[2]/div/div[3]/div/div/a":20,"/html/body/div[$LOOP$]/div[$LOOP$]/div[$LOOP$]/div[$LOOP$]/div[6]/div[$LOOP$]/div[2]/div/div[2]/div/div/span[2]/a":19,"/html/body/div[$LOOP$]/div[$LOOP$]/div[$LOOP$]/div[$LOOP$]/div[6]/div[$LOOP$]/div[2]/div/div[1]/div/div[1]/h3/a":19,"/html/body/div[$LOOP$]/div[$LOOP$]/div[$LOOP$]/div[$LOOP$]/div[6]/div[$LOOP$]/div[2]/div/div[2]/div/a":19,"/html/body/div[$LOOP$]/div[$LOOP$]/div[$LOOP$]/div[$LOOP$]/div[6]/div[$LOOP$]/div[2]/div/div[2]/div/a/strong":19,"/html/body/div[$LOOP$]/div[$LOOP$]/div[$LOOP$]/div[$LOOP$]/div[6]/div[$LOOP$]/div[2]/div/div[3]/ul/li[$LOOP$]/p/a":60},
      "common_item_words":[],"common_item_pathes":["/html/body/div[$LOOP$]/div[$LOOP$]/div[$LOOP$]/div[$LOOP$]/div[6]/div[$LOOP$]/div[2]/div/div[3]/ul/li[$LOOP$]/p/a","/html/body/div[$LOOP$]/div[$LOOP$]/div[$LOOP$]/div[$LOOP$]/div[]/div[$LOOP$]/div[2]/div/div[1]/div/div[3]/p[$LOOP$]/a"],
      "uncommon_item_pathes":{"/html/body/div[$LOOP$]/div[$LOOP$]/div[$LOOP$]/div[$LOOP$]/div[6]/div[$LOOP$]/div[2]/div/div[3]/ul/li[$LOOP$]/p/a/img":60,"/html/body/div[$LOOP$]/div[$LOOP$]/div[$LOOP$]/div[$LOOP$]/div[6]/div[$LOOP$]/div[2]/div/div[1]/div/div[1]/h3/a/text()":37,"/html/body/div[$LOOP$]/div[$LOOP$]/div[$LOOP$]/div[$LOOP$]/div[6]/div[$LOOP$]/div[2]/div/div[2]/div/a/strong/text()":36},
      "reserved_common_item_words":[],"delimiter":[],"contents_config_mode":false,"corporate_area_pathes":["/html/body/div[$LOOP$]/div[$LOOP$]/div[$LOOP$]/div[$LOOP$]/div[6]/div[$LOOP$]","/html/body/div[$LOOP$]/div[$LOOP$]/div[$LOOP$]/div[$LOOP$]/div[6]/div[$LOOP$]/div[2]/div/div[1]/div/div[3]/p[$LOOP$]","/html/body/div[$LOOP$]/div[$LOOP$]/div[$LOOP$]/div[$LOOP$]/div[6]/div[$LOOP$]/div[$LOOP$]/div[$LOOP$]/div[$LOOP$]/div/ul[$LOOP$]","/html/body/div[$LOOP$]/div[$LOOP$]/div[$LOOP$]/div[$LOOP$]/div[6]/div[$LOOP$]/div[3]/div[2]/div/div/ul/li[$LOOP$]/div/p[$LOOP$]","/html/body/div[24]/div[1]/div[8]/div[6]/div[6]/div[4]/div/a/div[$LOOP$]","/html/body/div[24]/div[1]/div[8]/div[6]/div[6]/div[4]/div/a/div[2]/p[$LOOP$]"],
      "corporate_area_start_pathes":{"/html/body/div[$LOOP$]/div[$LOOP$]/div[$LOOP$]/div[$LOOP$]/div[6]/div[$LOOP$]":40},
      "end_pathes":{"/html/body/div[$LOOP$]/div[$LOOP$]/div[$LOOP$]/div[$LOOP$]/div[6]/div[$LOOP$]/div[3]/div[2]/div/div/ul/li[14]/div/p[1]/span[2]/text()":19},
      "separation_data":null,"relative":{"title":[],"text":[]},"absolute":[],"same_column":[],
      "filter_path_of_content_urls":{"/html/body/div[$LOOP$]/div[$LOOP$]/div[$LOOP$]/div[$LOOP$]/div[6]/div[$LOOP$]/div[2]/div/div[3]/ul/li[$LOOP$]/p/a":40,"/html/body/div[$LOOP$]/div[$LOOP$]/div[$LOOP$]/div[$LOOP$]/div[6]/div[$LOOP$]/div[2]/div/div[3]/div/div/a":40,"/html/body/div[$LOOP$]/div[$LOOP$]/div[$LOOP$]/div[$LOOP$]/div[6]/div[$LOOP$]/div[2]/div/div[1]/div/div[1]/h3/a":40}},
      "single":{"org_name_pathes":{"/html/body/div[14]/div[1]/div[1]/div[1]/section/div[$LOOP$]/div[1]/div/h2/span":2},
      "contents_pathes":{"/html/body/div[14]/div[1]/div[3]/div[1]/div[$LOOP$]/div[2]/table[$LOOP$]":6},"footer_pathes":{},
      "common_item_words":[],"common_item_pathes":null,"uncommon_item_pathes":null,"reserved_common_item_words":[],"delimiter":[],
      "contents_config_mode":true,
      "relative":{"title":{"/html/body/div[14]/div[1]/div[3]/div[1]/div[$LOOP$]/div[$LOOP$]/table[$LOOP$]/tbody/tr[$LOOP$]/th":6},"text":{"/html/body/div[14]/div[1]/div[3]/div[1]/div[$LOOP$]/div[$LOOP$]/table[$LOOP$]/tbody/tr[$LOOP$]/td":6}},
      "absolute":{},"same_column":{}},
      "multi_available_urls":["https://tabelog.com/tokyo/A1313/"],"js_functions":{},"accessed_count":21,"high_priority_accessed_count":2,
      "accessed_urls":["https://tabelog.com/tokyo/A1313/","https://tabelog.com/tokyo/A1313/A131301/13176780/","https://tabelog.com/tokyo/A1313/A131301/13177492/dtlrvwlst/","https://tabelog.com/tokyo/A1313/A131301/13177492/dtlrvwlst/B451229678/","https://tabelog.com/tokyo/A1313/A131301/13177492/","https://tabelog.com/tokyo/A1313/A131301/13153417/","https://tabelog.com/tokyo/A1313/A131301/13130007/dtlrvwlst/B463553551/","https://tabelog.com/tokyo/A1313/A131301/13148801/","https://tabelog.com/tokyo/A1313/A131301/13130007/","https://tabelog.com/tokyo/A1313/A131301/13130007/dtlrvwlst/","https://tabelog.com/tokyo/A1313/A131301/13238306/","https://tabelog.com/tokyo/A1313/A131301/13200027/","https://tabelog.com/tokyo/A1313/A131301/13250537/","https://tabelog.com/tokyo/A1313/A131301/13250537/dtlrvwlst/","https://tabelog.com/tokyo/A1313/A131301/13250537/dtlrvwlst/B459850669/","https://tabelog.com/tokyo/A1313/A131301/13275848/","https://tabelog.com/tokyo/A1313/A131301/13275848/dtlrvwlst/B468515929/","https://tabelog.com/tokyo/A1313/A131301/13002300/","https://tabelog.com/tokyo/A1313/A131301/13011221/","https://tabelog.com/tokyo/A1313/A131301/13011221/dtlrvwlst/","https://tabelog.com/tokyo/A1313/A131301/13011221/dtlrvwlst/B467722022/"],
      "high_priority_accessed_urls":["https://tabelog.com/tokyo/A1313/A131303/13027693/","https://tabelog.com/tokyo/A1313/A131306/13020990/"],
      "analisys_page_count":21}'
      Json2.parse(tmp, symbolize: false)
    end

    def process_result(result, type)
      return unless type == SearchRequest::CorporateSingle::TYPE
      process_address(result)
    end

    private

    def process_address(result)

      result.each do |key, values|
        next if values['住所'].blank?

        address_test = values['住所'].dup
        values['住所'] = address_test.cut_after(values['組織名'], from_end: true).gsub(' : ', '')
        result[key] = values
      end
    end
  end
end
